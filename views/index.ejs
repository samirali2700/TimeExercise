<html lang="en">
    <%- include('./partials/head.ejs') %>
    <body>

        <%- include('./partials/nav.ejs') %>
        
        <div class="hero">
            <div class = "hero-top"> 
                <p id = "today">Today is <b><%= today %>, <%= date %> <%= month %>  <%= new Date().getFullYear() %></span> </b></p><br>
                <p>Time is: <b><span id = "times"></span></b></p>
            </div>
            <div class = "hero-main">
              <p>Your Public IP is:  <b><span id = "gfg"></span></b></p>
            </div>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script>

const date = new Date();

    const days = ['Sunday','Monday', 'Thuesday', 'Wednsday', 'Thursday', 'Friday', 'Saturday'];
    const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
    const hours = ['','13','14','15','16','17','18','19','20','21','22','23','24']


        
            const dateObject = {
                today: days[date.getDay()],
                date: date.getDate(),
                month: months[date.getMonth()],
                year: date.getFullYear()
            }

            function setHour(dates){
                let hour;
                if(dates.toLocaleTimeString().split(":")[2].split(" ")[1] === 'PM'){
                    hour = hours[dates.toLocaleTimeString().split(":")[0]];
                }
  
                else { 

                    if (dates.toLocaleTimeString().split(":")[0] === '12'){
                        hour = hours[dates.toLocaleTimeString().split(":")[0]];
                        
                    }
                    else{
                        hour = dates.toLocaleTimeString().split(":")[0]}
                    }
                return hour;
            }

            let hour = setHour(new Date());
            setInterval(function(){
                const dates = new Date();
                const times = document.getElementById('times');
                    

                
                    let min = dates.toLocaleTimeString().split(":")[1];

                    if(min === '60'){
                        setHour(dates);
                    }
                

                    let seconds = dates.toLocaleTimeString().split(":")[2].split(" ")[0];
                    times.innerText = hour+":"+min+":"+seconds;
            }, 1000);




             /* Add "https://api.ipify.org?format=json" statement
               this will communicate with the ipify servers in
               order to retrieve the IP address $.getJSON will
               load JSON-encoded data from the server using a
               GET HTTP request */
                
            $.getJSON("https://api.ipify.org?format=json", function(data) {
                
                // Setting text of element P with id gfg
                $("#gfg").html(data.ip);
            })
            
        </script>
    </body>
</html>